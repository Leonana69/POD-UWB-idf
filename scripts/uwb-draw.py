import re
import matplotlib.pyplot as plt

# Replace this string with your UWB data or load from a file
raw_data1    = """
[18:12:03.313] 0 -> 1: 0.22
[18:12:03.313] 1 -> 0: -0.29
[18:12:03.313] 0 -> 1: 0.17
[18:12:03.313] 1 -> 0: -0.11
[18:12:03.313] 0 -> 1: 0.11
[18:12:03.313] 0 -> 1: 0.33
[18:12:03.313] 1 -> 0: -0.33
[18:12:03.313] 0 -> 1: 0.25
[18:12:03.313] 0 -> 1: 0.22
[18:12:03.313] 1 -> 0: -0.29
[18:12:03.313] 0 -> 1: 0.12
[18:12:03.313] 1 -> 0: -0.13
[18:12:03.313] 0 -> 1: 0.07
[18:12:03.313] 1 -> 0: 0.04
[18:12:03.313] 0 -> 1: -0.01
[18:12:03.313] 0 -> 1: -0.07
[18:12:03.313] 1 -> 0: 0.04
[18:12:03.313] 0 -> 1: -0.06
[18:12:03.313] 0 -> 1: 0.12
[18:12:03.313] 1 -> 0: -0.13
[18:12:03.313] 0 -> 1: 0.23
[18:12:03.313] 0 -> 1: 0.67
[18:12:03.313] 0 -> 1: 0.47
[18:12:03.313] 1 -> 0: -0.52
[18:12:03.313] 0 -> 1: 0.58
[18:12:03.313] 0 -> 1: 0.39
[18:12:03.313] 1 -> 0: -0.35
[18:12:03.313] 0 -> 1: 0.26
[18:12:03.313] 1 -> 0: -0.75
[18:12:03.313] 0 -> 1: 0.94
[18:12:03.313] 1 -> 0: -0.89
[18:12:03.313] 0 -> 1: 1.09
[18:12:03.313] 0 -> 1: 1.44
[18:12:03.313] 1 -> 0: -1.45
[18:12:03.834] 0 -> 1: 0.29
[18:12:03.834] 1 -> 0: -0.22
[18:12:03.834] 1 -> 0: -0.77
[18:12:03.834] 0 -> 1: 1.23
[18:12:03.834] 1 -> 0: -1.14
[18:12:03.834] 0 -> 1: 1.36
[18:12:03.834] 0 -> 1: 1.05
[18:12:03.834] 1 -> 0: -1.18
[18:12:03.834] 0 -> 1: 1.37
[18:12:03.834] 0 -> 1: 1.06
[18:12:03.834] 1 -> 0: -1.08
[18:12:03.834] 0 -> 1: 1.18
[18:12:03.834] 0 -> 1: 1.12
[18:12:03.834] 0 -> 1: 0.92
[18:12:03.834] 1 -> 0: -0.99
[18:12:03.834] 1 -> 0: 0.04
"""

raw_data2 ="""
[18:08:49.369674] 0 -> 1: -1.11
[18:08:49.371533] 1 -> 0: -0.19
[18:08:49.386447] 0 -> 1: 0.39
[18:08:49.388351] 1 -> 0: -0.36
[18:08:49.403292] 0 -> 1: 0.37
[18:08:49.405193] 1 -> 0: 0.45
[18:08:49.420758] 0 -> 1: -0.61
[18:08:49.422128] 1 -> 0: -0.08
[18:08:49.436790] 0 -> 1: 0.33
[18:08:49.438783] 1 -> 0: 0.42
[18:08:49.453566] 0 -> 1: -0.75
[18:08:49.455572] 1 -> 0: 0.50
[18:08:49.470420] 0 -> 1: -0.25
[18:08:49.472431] 1 -> 0: -0.28
[18:08:49.487264] 0 -> 1: 0.32
[18:08:49.489275] 1 -> 0: -0.48
[18:08:49.504033] 0 -> 1: 0.52
[18:08:49.506067] 1 -> 0: 0.19
[18:08:49.520910] 0 -> 1: -0.55
[18:08:49.537525] 0 -> 1: -1.06
[18:08:49.539649] 1 -> 0: -0.09
[18:08:49.554465] 0 -> 1: 0.26
[18:08:49.556404] 1 -> 0: 0.22
[18:08:49.571287] 0 -> 1: -0.20
[18:08:49.573399] 1 -> 0: -0.27
[18:08:49.588046] 0 -> 1: 0.27
[18:08:49.590130] 1 -> 0: -0.40
[18:08:49.604782] 0 -> 1: 0.43
[18:08:49.606821] 1 -> 0: 0.57
[18:08:49.621576] 0 -> 1: -0.71
[18:08:49.624022] 1 -> 0: 0.38
[18:08:49.638528] 0 -> 1: -0.29
[18:08:49.640365] 1 -> 0: 0.52
[18:08:49.655402] 0 -> 1: -0.70
[18:08:49.672076] 0 -> 1: -1.05
[18:08:49.674149] 1 -> 0: -0.26
[18:08:49.688880] 0 -> 1: 0.23
[18:08:49.690782] 1 -> 0: 0.44
[18:08:49.705583] 0 -> 1: -0.34
[18:08:49.707765] 1 -> 0: -0.33
[18:08:49.722396] 0 -> 1: 0.37
[18:08:49.724359] 1 -> 0: 0.54
[18:08:49.739325] 0 -> 1: -0.58
[18:08:49.741208] 1 -> 0: -0.39
[18:08:49.756206] 0 -> 1: 0.33
[18:08:49.758300] 1 -> 0: 0.49
[18:08:49.772917] 0 -> 1: -0.55
[18:08:49.774797] 1 -> 0: -0.30
[18:08:49.789663] 0 -> 1: 0.34
[18:08:49.791589] 1 -> 0: 0.43
"""

def parse_trace(raw_data):
    pattern = re.compile(r"\[\d+:\d+:\d+\.\d+]\s+(\d)\s+->\s+(\d):\s+(-?\d+\.\d+)")
    values = []
    for match in pattern.finditer(raw_data):
        src, dst, val = match.groups()
        value = float(val)
        if src == '1' and dst == '0':
            value = -value
        values.append(value)
    return values

values1 = parse_trace(raw_data1)
values2 = parse_trace(raw_data2)

# Plot both traces
plt.plot(values1, marker='o', label="Trace 1")
plt.plot(values2, marker='x', label="Trace 2")
plt.xlabel("Sample Index")
plt.ylabel("Distance(0 - 1) [m]")
plt.title("UWB Distance Difference Comparison")
plt.grid(True)
plt.legend()
plt.tight_layout()
plt.show()