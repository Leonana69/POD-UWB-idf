import re
import matplotlib.pyplot as plt

# Replace this string with your UWB data or load from a file
raw_data1    = """
[19:56:13.543005] 1 -> 0: -0.08
[19:56:13.558026] 0 -> 1: -0.14
[19:56:13.559818] 1 -> 0: -0.39
[19:56:13.574990] 0 -> 1: -0.11
[19:56:13.576768] 1 -> 0: -0.02
[19:56:13.591848] 0 -> 1: -0.07
[19:56:13.593573] 1 -> 0: -0.22
[19:56:13.829329] 1 -> 0: -0.24
[19:56:13.845822] 1 -> 0: -0.17
[19:56:13.860603] 0 -> 1: -0.14
[19:56:13.997124] 1 -> 0: -0.22
[19:56:14.012080] 0 -> 1: -0.09
[19:56:14.013690] 1 -> 0: -0.23
[19:56:14.045215] 0 -> 1: 0.86
[19:56:14.062093] 0 -> 1: 0.89
[19:56:14.179873] 0 -> 1: -0.06
[19:56:14.196648] 0 -> 1: -0.09
[19:56:14.282815] 1 -> 0: -0.18
[19:56:14.299223] 1 -> 0: -0.13
[19:56:14.381561] 0 -> 1: -0.11
[19:56:14.398176] 0 -> 1: -0.17
[19:56:14.431973] 0 -> 1: -0.09
[19:56:14.482454] 0 -> 1: -0.09
[19:56:14.499096] 0 -> 1: -0.09
[19:56:14.518093] 1 -> 0: -0.19
[19:56:14.549432] 0 -> 1: -0.22
[19:56:14.566298] 0 -> 1: -0.20
[19:56:14.753235] 1 -> 0: -0.27
[19:56:14.938099] 1 -> 0: -0.22
[19:56:15.020923] 0 -> 1: -0.20
[19:56:15.037047] 0 -> 1: -0.15
[19:56:15.055891] 1 -> 0: -0.22
[19:56:15.072657] 1 -> 0: -0.17
[19:56:15.089360] 1 -> 0: -0.22
[19:56:15.105980] 1 -> 0: -0.29
[19:56:15.123118] 1 -> 0: -0.30
[19:56:15.139829] 1 -> 0: -0.10
[19:56:15.171186] 0 -> 1: -0.17
[19:56:15.187980] 0 -> 1: -0.17
[19:56:15.526294] 1 -> 0: -0.15
[19:56:15.540958] 0 -> 1: -0.09
[19:56:15.880175] 1 -> 0: -0.14
[19:56:15.895914] 1 -> 0: -0.23
[19:56:16.064807] 1 -> 0: -0.30
[19:56:16.080819] 1 -> 0: -0.35
[19:56:16.114449] 1 -> 0: -0.24
[19:56:16.283113] 1 -> 0: -0.23
[19:56:16.299191] 1 -> 0: -0.18
[19:56:16.467546] 1 -> 0: -0.47
[19:56:16.484189] 1 -> 0: -0.25
"""

raw_data2 ="""
[20:00:06.292724] 0 -> 1: -1.57
[20:00:06.309475] 0 -> 1: -1.55
[20:00:07.017507] 1 -> 0: 1.10
[20:00:07.048670] 0 -> 1: -1.29
[20:00:07.065489] 0 -> 1: -1.34
[20:00:07.099343] 0 -> 1: -1.40
[20:00:07.115785] 0 -> 1: -1.25
[20:00:07.134651] 1 -> 0: 0.99
[20:00:07.149514] 0 -> 1: -1.38
[20:00:07.991792] 1 -> 0: 1.03
[20:00:08.006413] 0 -> 1: -1.40
[20:00:08.023433] 0 -> 1: -1.41
[20:00:08.073741] 0 -> 1: -1.44
[20:00:08.090809] 0 -> 1: -1.42
[20:00:08.712290] 0 -> 1: -1.24
[20:00:08.732654] 0 -> 1: -1.44
[20:00:09.403456] 1 -> 0: 0.72
[20:00:09.418094] 0 -> 1: -1.20
[20:00:09.434711] 0 -> 1: -1.26
[20:00:11.621231] 1 -> 0: 1.09
[20:00:11.636060] 0 -> 1: -1.34
[20:00:11.654740] 1 -> 0: 1.11
[20:00:11.671414] 1 -> 0: 1.14
[20:00:11.722193] 1 -> 0: 1.17
[20:00:11.736956] 0 -> 1: -1.32
[20:00:11.738767] 1 -> 0: 1.15
[20:00:11.753743] 0 -> 1: -1.43
[20:00:11.755428] 1 -> 0: 1.07
[20:00:11.770296] 0 -> 1: -1.40
[20:00:11.938529] 0 -> 1: -1.32
[20:00:11.955261] 0 -> 1: -1.32
[20:00:11.974046] 1 -> 0: 0.95
[20:00:11.988900] 0 -> 1: -1.31
[20:00:12.091707] 1 -> 0: 1.14
[20:00:12.124206] 0 -> 1: -1.27
[20:00:12.158978] 1 -> 0: 1.06
[20:00:12.879632] 0 -> 1: -1.40
[20:00:13.064282] 0 -> 1: -1.29
[20:00:13.081192] 0 -> 1: -1.25
[20:00:13.150338] 1 -> 0: 1.22
[20:00:16.275901] 1 -> 0: 1.03
[20:00:17.754645] 1 -> 0: 1.18
[20:00:17.788198] 1 -> 0: 0.87
[20:00:18.324042] 0 -> 1: -1.42
20:00:19.164391] 0 -> 1: -1.33
[20:00:47.715998] 1 -> 0: 0.83
[20:00:47.732706] 1 -> 0: 0.80
[20:00:47.951160] 1 -> 0: 2.33
[20:00:48.304643] 1 -> 0: 0.90
[20:00:50.556608] 1 -> 0: 0.94
"""

def parse_trace(raw_data):
    pattern = re.compile(r"\[\d+:\d+:\d+\.\d+]\s+(\d)\s+->\s+(\d):\s+(-?\d+\.\d+)")
    values = []
    for match in pattern.finditer(raw_data):
        src, dst, val = match.groups()
        value = float(val)
        if src == '1' and dst == '0':
            value = -value
        values.append(value)
    return values

values1 = parse_trace(raw_data1)
values2 = parse_trace(raw_data2)

# Plot both traces
plt.plot(values1, marker='o', label="Trace 1")
plt.plot(values2, marker='x', label="Trace 2")
plt.xlabel("Sample Index")
plt.ylabel("Distance(0 - 1) [m]")
plt.title("UWB Distance Difference Comparison")
plt.grid(True)
plt.legend()
plt.tight_layout()
plt.show()