import re
from datetime import datetime, timedelta
import matplotlib.pyplot as plt

# no filter
data1 = """
[17:27:15.674261] IMU: 0.002838 -0.023726 0.984935 | 0.051260 -0.145197 0.030041 | 0.985225
[17:27:15.922666] IMU: 0.000885 -0.022749 0.987864 | -0.070810 -0.145197 0.030041 | 0.988127
[17:27:16.172701] IMU: -0.002533 -0.014448 0.988841 | -0.253916 0.343084 -0.092030 | 0.988950
[17:27:16.422421] IMU: 0.007233 -0.021772 0.983958 | 0.478506 0.037909 0.152111 | 0.984226
[17:27:16.672361] IMU: 0.001862 -0.020796 0.984447 | 0.112295 0.037909 -0.153065 | 0.984668
[17:27:16.922479] IMU: 0.002838 -0.022261 0.985423 | 0.112295 -0.145197 0.091076 | 0.985679
[17:27:17.172529] IMU: 0.003815 -0.023726 0.982982 | 0.234365 -0.084162 0.274181 | 0.983275
[17:27:17.422474] IMU: 0.003326 -0.019331 0.983470 | -0.375986 -0.145197 0.091076 | 0.983666
[17:27:17.672287] IMU: 0.003815 -0.025679 0.984447 | -0.192881 -0.511408 -0.092030 | 0.984789
[17:27:17.922341] IMU: 0.007233 -0.023237 0.985423 | 0.051260 -0.206232 -0.214100 | 0.985724
[17:27:18.172370] IMU: 0.002838 -0.020308 0.983470 | -0.070810 0.037909 0.152111 | 0.983684
[17:27:18.422651] IMU: 0.004303 -0.019331 0.987864 | 0.051260 -0.511408 0.091076 | 0.988063
[17:27:18.672281] IMU: 0.002350 -0.011518 0.990794 | 0.112295 0.159979 -0.214100 | 0.990864
[17:27:18.922355] IMU: 0.004791 -0.022261 0.984447 | 0.051260 0.098944 0.030041 | 0.984710
[17:27:19.172289] IMU: 0.004791 -0.025190 0.984447 | -0.009775 0.221014 -0.092030 | 0.984780
[17:27:19.422373] IMU: 0.005768 -0.021772 0.986400 | 0.112295 -0.267267 -0.030994 | 0.986657
[17:27:19.672275] IMU: 0.003815 -0.021284 0.983470 | 0.234365 0.282049 0.213146 | 0.983708
[17:27:19.922588] IMU: 0.004303 -0.022261 0.984935 | -0.131845 -0.145197 -0.214100 | 0.985196
[17:27:20.172469] IMU: 0.002350 -0.021772 0.982493 | 0.051260 0.037909 0.152111 | 0.982737
[17:27:20.422463] IMU: 0.005768 -0.020796 0.985911 | -0.009775 -0.206232 -0.153065 | 0.986148
[17:27:20.676709] IMU: 0.003815 -0.020308 0.982005 | -0.498056 -0.023127 0.030041 | 0.982222
[17:27:20.922512] IMU: 0.002350 -0.021772 0.986888 | -0.314951 0.098944 0.030041 | 0.987131
[17:27:21.173169] IMU: 0.001373 -0.023726 0.985423 | -0.192881 -0.084162 -0.153065 | 0.985710
[17:27:21.424071] IMU: 0.005768 -0.024214 0.982005 | 0.356436 -0.267267 0.274181 | 0.982321
[17:27:21.672500] IMU: 0.006744 -0.026655 0.985911 | -0.070810 0.159979 0.091076 | 0.986295
[17:27:21.922828] IMU: 0.007721 -0.023237 0.986400 | 0.112295 0.037909 -0.153065 | 0.986704
[17:27:22.173025] IMU: 0.006256 -0.022749 0.986400 | 0.173330 0.159979 0.274181 | 0.986682
[17:27:22.422811] IMU: 0.003326 -0.023237 0.986888 | -0.070810 0.159979 -0.030994 | 0.987167
[17:27:22.672452] IMU: 0.004303 -0.021284 0.986400 | 0.234365 -0.023127 -0.275135 | 0.986639
[17:27:22.922928] IMU: 0.002350 -0.024214 0.986888 | -0.070810 -0.145197 -0.092030 | 0.987188
[17:27:23.172405] IMU: 0.002350 -0.023726 0.985423 | -0.253916 0.221014 -0.092030 | 0.985711
[17:27:23.422573] IMU: 0.002838 -0.025190 0.985911 | -0.009775 0.709295 0.030041 | 0.986237
[17:27:23.673701] IMU: 0.006256 -0.019819 0.981029 | -0.253916 0.098944 0.091076 | 0.981249
[17:27:23.922874] IMU: 0.003815 -0.024214 0.989818 | -0.192881 -0.145197 0.091076 | 0.990121
[17:27:24.172620] IMU: 0.004791 -0.026167 0.984447 | -0.070810 0.159979 0.091076 | 0.984806
[17:27:24.422565] IMU: 0.004791 -0.023726 0.983470 | 0.295401 0.159979 -0.214100 | 0.983768
[17:27:24.672681] IMU: 0.001373 -0.020796 0.987376 | 0.112295 -0.145197 0.091076 | 0.987596
[17:27:24.922560] IMU: 0.007721 -0.023237 0.983958 | 0.051260 0.282049 -0.030994 | 0.984263
[17:27:25.172401] IMU: 0.005280 -0.022261 0.982982 | -0.131845 -0.206232 -0.092030 | 0.983248
[17:27:25.423780] IMU: 0.001862 -0.026167 0.983958 | 0.295401 -0.023127 0.274181 | 0.984308
[17:27:25.672374] IMU: 0.005768 -0.021284 0.985911 | 0.539541 0.282049 0.213146 | 0.986158
[17:27:25.922509] IMU: 0.001862 -0.024702 0.984935 | 0.112295 -0.145197 -0.153065 | 0.985246
[17:27:26.172473] IMU: 0.001373 -0.019819 0.985423 | 0.173330 0.037909 -0.030994 | 0.985623
[17:27:26.422432] IMU: 0.007233 -0.027632 0.986888 | 0.173330 0.159979 0.091076 | 0.987301
[17:27:26.672967] IMU: 0.002838 -0.027143 0.987864 | 0.112295 0.098944 0.091076 | 0.988241
[17:27:26.922455] IMU: 0.003815 -0.019819 0.987376 | -0.131845 0.037909 0.030041 | 0.987583
[17:27:27.172429] IMU: 0.004791 -0.022749 0.982982 | 0.051260 -0.206232 -0.092030 | 0.983257
[17:27:27.423199] IMU: 0.001862 -0.021772 0.985423 | -0.009775 0.037909 -0.092030 | 0.985665
[17:27:27.674012] IMU: 0.002350 -0.023237 0.986888 | -0.192881 -0.023127 -0.214100 | 0.987164
[17:27:27.922606] IMU: 0.001373 -0.022749 0.982982 | 0.112295 0.098944 -0.397205 | 0.983246
[17:27:28.172426] IMU: 0.004791 -0.022261 0.984447 | 0.051260 -0.023127 0.091076 | 0.984710
[17:27:28.424813] IMU: 0.005768 -0.024214 0.982982 | 0.051260 -0.267267 0.091076 | 0.983297
[17:27:28.672758] IMU: 0.003815 -0.022749 0.986400 | -0.131845 0.037909 0.091076 | 0.986669
[17:27:28.923933] IMU: -0.000092 -0.017378 0.984935 | 0.173330 0.037909 -0.214100 | 0.985088
[17:27:29.172554] IMU: 0.004791 -0.023237 0.981517 | -0.009775 -0.145197 -0.030994 | 0.981804
[17:27:29.422875] IMU: 0.003815 -0.021772 0.987864 | -0.314951 0.037909 -0.214100 | 0.988112
[17:27:29.672530] IMU: 0.003815 -0.020796 0.981029 | -0.009775 -0.145197 -0.092030 | 0.981256
[17:27:29.922478] IMU: -0.000092 -0.024702 0.985911 | -0.070810 -0.023127 -0.336170 | 0.986221
[17:27:30.172403] IMU: 0.001862 -0.023237 0.986400 | 0.112295 0.037909 0.030041 | 0.986675
[17:27:30.422522] IMU: -0.000092 -0.024702 0.987376 | -0.070810 0.343084 -0.092030 | 0.987685
[17:27:30.672495] IMU: 0.005768 -0.023726 0.984447 | -0.070810 -0.084162 0.091076 | 0.984749
[17:27:30.922546] IMU: 0.003815 -0.020796 0.984935 | -0.070810 0.098944 -0.153065 | 0.985162
[17:27:31.176712] IMU: 0.002838 -0.023237 0.982005 | -0.192881 -0.084162 0.213146 | 0.982284
[17:27:31.424293] IMU: 0.005768 -0.025679 0.983958 | -0.070810 0.098944 -0.275135 | 0.984310
[17:27:31.672522] IMU: 0.000885 -0.020796 0.984447 | 0.173330 -0.023127 -0.214100 | 0.984667
[17:27:31.922620] IMU: 0.004791 -0.026655 0.986888 | -0.070810 -0.206232 0.213146 | 0.987259
[17:27:32.172443] IMU: 0.002350 -0.020796 0.983958 | -0.070810 -0.389338 -0.030994 | 0.984181
[17:27:32.422511] IMU: 0.007721 -0.021284 0.983958 | 0.295401 -0.023127 0.091076 | 0.984219
[17:27:32.672524] IMU: 0.004303 -0.021772 0.988353 | 0.173330 -0.267267 -0.092030 | 0.988602
"""

# accel: 20hz, gyro: 50hz
data1 = """
[17:37:17.083964] IMU: 0.003534 -0.023255 0.983656 | -0.074645 0.075272 -0.053742 | 0.983937
[17:37:17.334089] IMU: 0.005205 -0.022943 0.981856 | -0.019067 0.139141 0.019987 | 0.982137
[17:37:17.583999] IMU: 0.004999 -0.022353 0.982937 | -0.016323 -0.040528 -0.052056 | 0.983204
[17:37:17.833934] IMU: 0.004608 -0.023584 0.984848 | 0.118949 -0.063290 -0.008954 | 0.985141
[17:37:18.083879] IMU: 0.004041 -0.023428 0.982725 | -0.080968 0.116822 -0.137461 | 0.983012
[17:37:18.334013] IMU: 0.003798 -0.021800 0.984132 | 0.016834 -0.060982 -0.062529 | 0.984380
[17:37:18.584374] IMU: 0.003836 -0.023006 0.983530 | 0.068256 0.010986 0.020534 | 0.983806
[17:37:18.833854] IMU: 0.003681 -0.023380 0.984138 | -0.121947 0.123704 -0.004255 | 0.984423
[17:37:19.083862] IMU: 0.004085 -0.021828 0.981440 | 0.106478 -0.187643 -0.056351 | 0.981692
[17:37:19.336133] IMU: 0.002737 -0.022672 0.983650 | 0.039633 -0.018251 -0.022841 | 0.983916
[17:37:19.583855] IMU: 0.004661 -0.023339 0.982292 | 0.085549 -0.107100 -0.027984 | 0.982581
[17:37:19.833887] IMU: 0.003799 -0.023674 0.984216 | -0.057992 0.007339 -0.060577 | 0.984508
[17:37:20.083915] IMU: 0.004800 -0.022528 0.982025 | -0.021205 0.108124 -0.007891 | 0.982295
[17:37:20.333993] IMU: 0.003396 -0.023391 0.983270 | -0.107916 0.079634 -0.108815 | 0.983554
[17:37:20.584048] IMU: 0.005474 -0.022365 0.983004 | -0.185894 -0.077249 -0.062047 | 0.983274
[17:37:20.833883] IMU: 0.004483 -0.022168 0.983985 | -0.072919 -0.077704 -0.040571 | 0.984245
[17:37:21.087223] IMU: 0.002871 -0.023268 0.981927 | 0.000569 -0.005350 0.006365 | 0.982207
[17:37:21.335260] IMU: 0.002849 -0.022062 0.983107 | -0.068764 -0.055836 -0.039819 | 0.983359
[17:37:21.584074] IMU: 0.005033 -0.023005 0.982979 | -0.078198 0.061686 -0.090971 | 0.983261
[17:37:21.833851] IMU: 0.005694 -0.022711 0.982469 | 0.070892 -0.006554 -0.009643 | 0.982748
[17:37:22.084190] IMU: 0.004041 -0.021563 0.982189 | 0.061823 -0.143224 -0.011421 | 0.982434
[17:37:22.334074] IMU: 0.004442 -0.021711 0.983449 | -0.169268 0.093946 -0.056616 | 0.983698
[17:37:22.583910] IMU: 0.004434 -0.023049 0.984461 | 0.045545 -0.073421 0.059412 | 0.984740
[17:37:22.835703] IMU: 0.005185 -0.022236 0.983393 | 0.018103 0.008426 -0.033357 | 0.983658
[17:37:23.085944] IMU: 0.005047 -0.023308 0.982786 | 0.000157 0.120532 0.026987 | 0.983075
[17:37:23.335164] IMU: 0.005180 -0.022693 0.982518 | -0.140784 0.047480 -0.009145 | 0.982793
[17:37:23.584089] IMU: 0.003308 -0.023484 0.982261 | 0.007019 -0.106379 0.044877 | 0.982547
[17:37:23.834004] IMU: 0.003919 -0.022066 0.983064 | -0.197918 0.175642 0.041621 | 0.983319
[17:37:24.084402] IMU: 0.005420 -0.022179 0.983214 | -0.094770 0.116796 -0.082260 | 0.983479
[17:37:24.334351] IMU: 0.005101 -0.022001 0.983423 | -0.025231 -0.002019 -0.168538 | 0.983683
[17:37:24.584121] IMU: 0.006082 -0.023075 0.983549 | -0.100023 0.082576 0.078830 | 0.983838
[17:37:24.833930] IMU: 0.005162 -0.023523 0.983160 | -0.022548 0.067540 -0.067422 | 0.983455
[17:37:25.089855] IMU: 0.005593 -0.023403 0.981796 | 0.058632 -0.045647 0.022471 | 0.982091
[17:37:25.333885] IMU: 0.004079 -0.022414 0.984118 | -0.157777 0.157487 -0.106404 | 0.984381
[17:37:25.583865] IMU: 0.004688 -0.023028 0.983598 | -0.145330 0.090291 -0.076334 | 0.983878
[17:37:25.834759] IMU: 0.004924 -0.022991 0.982400 | -0.075594 -0.064925 0.079015 | 0.982681
[17:37:26.084054] IMU: 0.003336 -0.022494 0.982794 | -0.027279 0.050031 -0.042538 | 0.983057
[17:37:26.334407] IMU: 0.005523 -0.022144 0.982105 | -0.037122 0.044746 -0.067085 | 0.982370
[17:37:26.584145] IMU: 0.003763 -0.024455 0.982990 | -0.012610 0.011569 0.042541 | 0.983302
[17:37:26.833868] IMU: 0.004741 -0.021950 0.982716 | 0.006610 -0.055409 0.014974 | 0.982972
[17:37:27.083891] IMU: 0.004785 -0.022840 0.982810 | 0.001188 -0.036591 -0.095547 | 0.983087
[17:37:27.333990] IMU: 0.003313 -0.022675 0.982703 | 0.099889 -0.047119 0.032245 | 0.982971
[17:37:27.583890] IMU: 0.005153 -0.023016 0.983293 | 0.061927 -0.038557 -0.001791 | 0.983576
[17:37:27.834352] IMU: 0.004974 -0.022912 0.982294 | -0.137664 0.077651 -0.029572 | 0.982574
[17:37:28.083883] IMU: 0.005027 -0.023534 0.982444 | -0.104768 -0.116393 -0.038730 | 0.982739
[17:37:28.334363] IMU: 0.003626 -0.022587 0.982097 | -0.044115 0.102411 -0.073498 | 0.982363
[17:37:28.583970] IMU: 0.004309 -0.022683 0.982681 | -0.023960 0.004486 -0.094909 | 0.982952
[17:37:28.834108] IMU: 0.003509 -0.022896 0.983178 | -0.021194 -0.033467 -0.142000 | 0.983450
[17:37:29.089844] IMU: 0.004593 -0.022777 0.983578 | -0.089682 0.093783 -0.012481 | 0.983852
[17:37:29.334094] IMU: 0.004276 -0.021487 0.982758 | -0.027459 -0.016862 0.021961 | 0.983002
[17:37:29.584151] IMU: 0.003792 -0.023361 0.982207 | -0.065039 0.020852 -0.047801 | 0.982492
[17:37:29.834143] IMU: 0.004085 -0.022918 0.982349 | -0.100133 -0.005469 -0.002430 | 0.982624
[17:37:30.084551] IMU: 0.002732 -0.024376 0.983656 | 0.030749 0.016292 -0.061400 | 0.983962
[17:37:30.334353] IMU: 0.004776 -0.022763 0.982190 | -0.142385 0.054763 -0.007156 | 0.982466
[17:37:30.584019] IMU: 0.004673 -0.022369 0.983745 | 0.047898 -0.042292 0.040633 | 0.984010
[17:37:30.834154] IMU: 0.005325 -0.022661 0.982711 | 0.054585 -0.039038 0.084861 | 0.982987
[17:37:31.083958] IMU: 0.004312 -0.023812 0.982856 | 0.076290 -0.002609 -0.140460 | 0.983154
[17:37:31.334324] IMU: 0.005085 -0.022727 0.983918 | 0.032186 -0.034363 -0.003044 | 0.984194
[17:37:31.584037] IMU: 0.002619 -0.022591 0.982708 | 0.151140 -0.106881 0.070295 | 0.982971
[17:37:31.833970] IMU: 0.004173 -0.023529 0.984842 | 0.015982 0.099569 -0.076285 | 0.985132
[17:37:32.084200] IMU: 0.004970 -0.023831 0.980395 | 0.005842 0.001825 -0.202121 | 0.980697
[17:37:32.335348] IMU: 0.004694 -0.022243 0.983205 | 0.013864 0.063767 0.002990 | 0.983468
[17:37:32.584141] IMU: 0.005014 -0.022222 0.983155 | 0.062211 -0.077044 0.002803 | 0.983418
[17:37:32.834115] IMU: 0.004209 -0.023503 0.982620 | -0.173927 0.130771 -0.001927 | 0.982910
[17:37:33.087089] IMU: 0.004506 -0.022927 0.982711 | -0.008070 0.033847 -0.062409 | 0.982989
[17:37:33.334113] IMU: 0.003724 -0.023295 0.982623 | 0.011000 -0.030835 -0.095575 | 0.982906
[17:37:33.583978] IMU: 0.004934 -0.022280 0.983553 | -0.046482 -0.014925 -0.014400 | 0.983818
[17:37:33.835413] IMU: 0.004168 -0.021975 0.981218 | 0.024126 -0.087614 -0.011707 | 0.981473
[17:37:34.084105] IMU: 0.004628 -0.022696 0.983436 | -0.122352 -0.015946 -0.002728 | 0.983709
"""

# accel: 40hz, gyro: 80hz
data2 = """
[17:30:57.972391] IMU: 0.002956 -0.021524 0.982727 | 0.028936 -0.111844 0.055925 | 0.982967
[17:30:58.222250] IMU: 0.003705 -0.023393 0.982398 | 0.035501 -0.036079 0.028339 | 0.982683
[17:30:58.472197] IMU: 0.004544 -0.021895 0.983979 | -0.118424 0.122228 -0.058892 | 0.984233
[17:30:58.721926] IMU: 0.005991 -0.021239 0.982770 | -0.005888 -0.062210 0.127566 | 0.983018
[17:30:58.972130] IMU: 0.003433 -0.022839 0.983558 | 0.143756 -0.098654 0.044062 | 0.983829
[17:30:59.222132] IMU: 0.004747 -0.021360 0.980581 | -0.026372 0.000155 -0.028097 | 0.980825
[17:30:59.472131] IMU: 0.005200 -0.025275 0.983080 | -0.035746 0.054116 0.027350 | 0.983419
[17:30:59.722237] IMU: 0.004587 -0.023903 0.983752 | 0.004565 0.010296 -0.061209 | 0.984053
[17:30:59.973709] IMU: 0.004236 -0.021862 0.982392 | -0.016554 -0.023195 -0.079723 | 0.982645
[17:31:00.222063] IMU: 0.003540 -0.021832 0.984571 | -0.127180 -0.078008 -0.011389 | 0.984820
[17:31:00.473035] IMU: 0.005801 -0.020833 0.983984 | 0.058269 -0.054858 -0.013976 | 0.984222
[17:31:00.722168] IMU: 0.002891 -0.022501 0.980889 | 0.204311 -0.168646 -0.078788 | 0.981152
[17:31:00.971965] IMU: 0.003119 -0.023334 0.982714 | -0.000633 0.171641 -0.242593 | 0.982996
[17:31:01.223191] IMU: 0.004644 -0.023861 0.984305 | -0.003227 0.059116 0.048328 | 0.984605
[17:31:01.473113] IMU: 0.003697 -0.023902 0.985314 | 0.117676 -0.006416 -0.033321 | 0.985611
[17:31:01.722142] IMU: 0.003223 -0.021978 0.983427 | 0.000973 -0.108265 0.051133 | 0.983677
[17:31:01.972314] IMU: 0.003506 -0.022838 0.983092 | 0.003471 -0.034943 -0.089408 | 0.983364
[17:31:02.221952] IMU: 0.002850 -0.023852 0.982363 | 0.005488 -0.102550 -0.163467 | 0.982656
[17:31:02.472175] IMU: 0.003222 -0.023042 0.982135 | 0.076128 -0.117956 0.013586 | 0.982410
[17:31:02.722191] IMU: 0.003989 -0.023360 0.984442 | 0.002306 -0.052415 0.040575 | 0.984727
[17:31:02.972235] IMU: 0.003966 -0.020383 0.982802 | 0.045904 -0.082661 0.027311 | 0.983021
[17:31:03.222184] IMU: 0.001997 -0.023454 0.983888 | -0.110274 -0.052969 -0.247870 | 0.984170
[17:31:03.472132] IMU: 0.004029 -0.021843 0.982001 | -0.139245 0.248298 -0.145290 | 0.982252
[17:31:03.722240] IMU: 0.003679 -0.020794 0.982845 | 0.037437 0.010189 -0.082505 | 0.983072
[17:31:03.972442] IMU: 0.004513 -0.024014 0.982923 | 0.161791 -0.004714 -0.010881 | 0.983227
[17:31:04.222738] IMU: 0.003572 -0.022809 0.983658 | -0.116183 0.130351 -0.045331 | 0.983929
[17:31:04.472165] IMU: 0.002866 -0.023058 0.985246 | -0.044976 0.124023 -0.109790 | 0.985520
[17:31:04.722034] IMU: 0.004588 -0.024943 0.980986 | 0.002594 0.017314 -0.025676 | 0.981314
[17:31:04.972172] IMU: 0.002569 -0.023152 0.981780 | -0.043010 -0.124882 -0.022462 | 0.982056
[17:31:05.222249] IMU: 0.004783 -0.022476 0.983984 | -0.008412 -0.148915 0.001800 | 0.984252
[17:31:05.472209] IMU: 0.003985 -0.021641 0.983063 | 0.028149 -0.006541 -0.014522 | 0.983309
[17:31:05.721987] IMU: 0.004474 -0.023900 0.983556 | -0.102926 0.074744 0.002966 | 0.983857
[17:31:05.972048] IMU: 0.002864 -0.023132 0.981959 | -0.020212 0.002743 -0.090406 | 0.982236
[17:31:06.222223] IMU: 0.001654 -0.021296 0.984323 | -0.046055 -0.101675 -0.124511 | 0.984555
[17:31:06.472079] IMU: 0.003610 -0.022988 0.984481 | -0.148348 0.162995 -0.054851 | 0.984756
[17:31:06.722234] IMU: 0.002928 -0.022193 0.983790 | 0.117216 0.015042 0.075454 | 0.984044
[17:31:06.972447] IMU: 0.004979 -0.021925 0.984467 | -0.047860 0.129928 -0.195736 | 0.984724
[17:31:07.222086] IMU: 0.005382 -0.021593 0.983382 | -0.044822 0.081256 0.045497 | 0.983634
[17:31:07.471827] IMU: 0.002274 -0.024604 0.982060 | 0.141284 -0.010534 0.003531 | 0.982371
[17:31:07.723035] IMU: 0.003468 -0.021959 0.981971 | 0.025772 -0.116109 -0.098905 | 0.982222
[17:31:07.978394] IMU: 0.002597 -0.022997 0.983493 | -0.074061 0.086915 -0.038106 | 0.983765
[17:31:08.222310] IMU: 0.002367 -0.022494 0.982833 | 0.084193 -0.203291 0.010056 | 0.983093
[17:31:08.472217] IMU: 0.002717 -0.021890 0.980322 | 0.044562 -0.144543 0.033136 | 0.980570
[17:31:08.722153] IMU: 0.003258 -0.022676 0.984275 | 0.000339 -0.014325 -0.036949 | 0.984541
[17:31:08.972223] IMU: 0.003272 -0.023055 0.983020 | 0.136784 0.091343 0.119039 | 0.983296
[17:31:09.222170] IMU: 0.003078 -0.022302 0.984700 | 0.046889 0.074085 -0.076419 | 0.984957
[17:31:09.472167] IMU: 0.003683 -0.021883 0.983908 | -0.039227 -0.071205 0.069512 | 0.984159
[17:31:09.722373] IMU: 0.003561 -0.022979 0.984156 | -0.067130 0.075340 -0.077203 | 0.984431
[17:31:09.972167] IMU: 0.003205 -0.023661 0.983424 | -0.065508 -0.012622 0.061329 | 0.983714
[17:31:10.222111] IMU: 0.003347 -0.021163 0.982178 | -0.082854 0.182044 -0.062251 | 0.982411
[17:31:10.472285] IMU: 0.005284 -0.021312 0.981965 | 0.105739 -0.221084 -0.002294 | 0.982210
[17:31:10.722121] IMU: 0.004423 -0.020754 0.983240 | 0.090390 -0.132307 -0.041914 | 0.983469
[17:31:10.972055] IMU: 0.005088 -0.022707 0.982369 | 0.003297 -0.047980 0.126154 | 0.982644
[17:31:11.221996] IMU: 0.004124 -0.023457 0.982467 | 0.018988 -0.054692 0.030590 | 0.982756
[17:31:11.472073] IMU: 0.003542 -0.022438 0.981883 | 0.083055 0.028864 0.055309 | 0.982146
[17:31:11.722199] IMU: 0.005160 -0.022589 0.983145 | -0.026471 -0.061047 -0.120751 | 0.983418
[17:31:11.972098] IMU: 0.002499 -0.023704 0.983115 | 0.064310 0.106615 0.022953 | 0.983404
[17:31:12.221887] IMU: 0.002788 -0.021268 0.982254 | 0.040514 -0.003300 -0.050685 | 0.982488
[17:31:12.471933] IMU: 0.004975 -0.023896 0.983616 | -0.012902 0.126055 -0.114252 | 0.983919
[17:31:12.721920] IMU: 0.005250 -0.022751 0.982488 | 0.071467 0.037788 -0.056355 | 0.982765
[17:31:12.972067] IMU: 0.002830 -0.020547 0.982496 | 0.034687 -0.129261 -0.007511 | 0.982714
[17:31:13.222068] IMU: 0.004002 -0.023596 0.981554 | 0.125292 0.003587 0.088608 | 0.981846
[17:31:13.472704] IMU: 0.001423 -0.021323 0.984671 | -0.204087 0.175735 -0.096519 | 0.984903
[17:31:13.722210] IMU: 0.003102 -0.024818 0.983423 | -0.038869 0.091273 0.028383 | 0.983741
[17:31:14.722336] IMU: 0.003749 -0.021162 0.982065 | 0.126510 -0.150200 -0.068225 | 0.982301
[17:31:14.972034] IMU: 0.002997 -0.021942 0.983704 | -0.096302 -0.072958 -0.114682 | 0.983953
[17:31:15.222111] IMU: 0.002501 -0.022063 0.984902 | 0.003571 -0.172611 -0.096103 | 0.985153
[17:31:15.472249] IMU: 0.003804 -0.022490 0.980519 | -0.004280 -0.035054 0.013990 | 0.980784
[17:31:15.722353] IMU: 0.003038 -0.025223 0.983322 | -0.030028 0.111986 0.028823 | 0.983650" \
"""

def parse_imu_data(data):
    acc, gyro, scalar = [], [], []
    pattern = re.compile(
        r"\[\d+:\d+:\d+\.\d+\] IMU: ([\d\-\.\s]+)\| ([\d\-\.\s]+)\| ([\d\.\-eE]+)"
    )
    for line in data.strip().splitlines():
        match = pattern.search(line)
        if match:
            acc_vals = list(map(float, match.group(1).split()))
            acc_vals[2] -= 1.0  # Adjusting the z-axis value
            gyro_vals = list(map(float, match.group(2).split()))
            scalar_val = float(match.group(3))
            acc.append(acc_vals)
            gyro.append(gyro_vals)
            scalar.append(scalar_val)
    return acc, gyro, scalar

acc1, gyro1, scalar1 = parse_imu_data(data1)
acc2, gyro2, scalar2 = parse_imu_data(data2)

# Convert to x, y, z format
acc1_x, acc1_y, acc1_z = zip(*acc1)
acc2_x, acc2_y, acc2_z = zip(*acc2)

gyro1_x, gyro1_y, gyro1_z = zip(*gyro1)
gyro2_x, gyro2_y, gyro2_z = zip(*gyro2)

samples = range(len(acc1))  # assuming both have equal length

plt.figure(figsize=(14, 9))

# Accelerometer
plt.subplot(3, 1, 1)
plt.plot(samples, acc1_x, label="acc_x (data1)")
plt.plot(samples, acc2_x, label="acc_x (data2)", linestyle="dashed")
plt.plot(samples, acc1_y, label="acc_y (data1)")
plt.plot(samples, acc2_y, label="acc_y (data2)", linestyle="dashed")
plt.plot(samples, acc1_z, label="acc_z (data1)")
plt.plot(samples, acc2_z, label="acc_z (data2)", linestyle="dashed")
plt.title("Accelerometer Comparison")
plt.legend()

# Gyroscope
plt.subplot(3, 1, 2)
plt.plot(samples, gyro1_x, label="gyro_x (data1)")
plt.plot(samples, gyro2_x, label="gyro_x (data2)", linestyle="dashed")
plt.plot(samples, gyro1_y, label="gyro_y (data1)")
plt.plot(samples, gyro2_y, label="gyro_y (data2)", linestyle="dashed")
plt.plot(samples, gyro1_z, label="gyro_z (data1)")
plt.plot(samples, gyro2_z, label="gyro_z (data2)", linestyle="dashed")
plt.title("Gyroscope Comparison")
plt.legend()

# Scalar
plt.subplot(3, 1, 3)
plt.plot(samples, scalar1, label="scalar (data1)")
plt.plot(samples, scalar2, label="scalar (data2)", linestyle="dashed")
plt.title("Scalar Comparison")
plt.legend()

plt.xlabel("Sample Index")
plt.tight_layout()
plt.show()